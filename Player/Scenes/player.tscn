[gd_scene load_steps=30 format=3 uid="uid://bc0hyu7yps2kh"]

[ext_resource type="Script" uid="uid://bs5umt74x0kwy" path="res://Player/Scripts/player.gd" id="1_1yy2w"]
[ext_resource type="PackedScene" uid="uid://b3hic50tuoiph" path="res://Weapons/Scenes/slash_weapon.tscn" id="2_bf386"]
[ext_resource type="PackedScene" uid="uid://0ceh7d0bc60j" path="res://Weapons/Scenes/black_sword.tscn" id="3_17k2o"]
[ext_resource type="PackedScene" uid="uid://b7vi7ofwvn7oj" path="res://Weapons/Scenes/thrust_weapon.tscn" id="4_e0sep"]
[ext_resource type="Texture2D" uid="uid://ca45giadvu0dt" path="res://Player/Sprites/player_down.png" id="5_ut808"]
[ext_resource type="Texture2D" uid="uid://1w7sx5301v17" path="res://Player/Sprites/player_idle.png" id="6_aytf0"]
[ext_resource type="Texture2D" uid="uid://nglxsihcymas" path="res://Player/Sprites/player_left.png" id="7_p0l7e"]
[ext_resource type="Texture2D" uid="uid://nbchdqo6j37d" path="res://Player/Sprites/player_right.png" id="8_drxtx"]
[ext_resource type="Texture2D" uid="uid://0vxpm48rn2vm" path="res://Player/Sprites/player_stun.png" id="9_y1muo"]
[ext_resource type="Texture2D" uid="uid://d232pertt6jlr" path="res://Player/Sprites/player_up.png" id="10_0isv7"]
[ext_resource type="Script" uid="uid://cfd4cs3ly7d4r" path="res://Player/Scripts/player_state_machine.gd" id="11_nxnwp"]
[ext_resource type="Script" uid="uid://cg4ityikkyls2" path="res://Player/Scripts/state_idle.gd" id="12_efn1h"]
[ext_resource type="Script" uid="uid://cffojyfyn15ni" path="res://Player/Scripts/state_walk.gd" id="13_4cney"]
[ext_resource type="Script" uid="uid://dohwnjdksj4um" path="res://Player/Scripts/state_attack.gd" id="14_kqrd2"]
[ext_resource type="Script" uid="uid://cg64h2lxts5po" path="res://Player/Scripts/state_stun.gd" id="15_ypisy"]
[ext_resource type="Script" uid="uid://bx6ohkp14sfl4" path="res://Player/Scripts/state_death.gd" id="16_58d4g"]
[ext_resource type="Script" uid="uid://dp6cgg8gt3r7a" path="res://Player/Scripts/interactions.gd" id="17_h4mmb"]
[ext_resource type="PackedScene" uid="uid://bjhxrchsefc6y" path="res://General/HitBox/hit_box.tscn" id="18_c0upf"]
[ext_resource type="Script" uid="uid://c43n785t3mqo8" path="res://Player/Scripts/player_camera.gd" id="19_pap50"]
[ext_resource type="Script" uid="uid://bxjvbrbc6g3sp" path="res://Player/Scripts/weapon_position.gd" id="20_v74qa"]
[ext_resource type="Script" uid="uid://5q4wemb10ae2" path="res://Player/Scripts/front_weapon_position.gd" id="21_0x0ja"]

[sub_resource type="CircleShape2D" id="CircleShape2D_o28un"]
radius = 50.0

[sub_resource type="SpriteFrames" id="SpriteFrames_cvnsp"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("5_ut808")
}],
"loop": true,
"name": &"down",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("6_aytf0")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("7_p0l7e")
}],
"loop": true,
"name": &"left",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("8_drxtx")
}],
"loop": true,
"name": &"right",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("9_y1muo")
}],
"loop": false,
"name": &"stun",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("10_0isv7")
}],
"loop": true,
"name": &"up",
"speed": 5.0
}]

[sub_resource type="CircleShape2D" id="CircleShape2D_b1ygp"]
radius = 47.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_b1ygp"]
size = Vector2(64, 64)

[sub_resource type="Animation" id="Animation_b1ygp"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_o28un"]
resource_name = "damaged"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [Color(1, 1, 1, 1), Color(1, 1, 1, 0.0980392), Color(1, 1, 1, 1), Color(1, 1, 1, 0.196078), Color(1, 1, 1, 1), Color(1, 1, 1, 0.392157), Color(1, 1, 1, 1), Color(1, 1, 1, 0.588235), Color(1, 1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_pisgm"]
resource_name = "default"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_n471f"]
_data = {
&"RESET": SubResource("Animation_b1ygp"),
&"damaged": SubResource("Animation_o28un"),
&"default": SubResource("Animation_pisgm")
}

[node name="Player" type="CharacterBody2D"]
z_index = 5
collision_mask = 16
script = ExtResource("1_1yy2w")
weapon_scenes = Array[PackedScene]([ExtResource("2_bf386"), ExtResource("3_17k2o"), ExtResource("4_e0sep")])

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0.5, 0)
scale = Vector2(0.63, 0.63)
shape = SubResource("CircleShape2D_o28un")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
scale = Vector2(0.64, 0.64)
sprite_frames = SubResource("SpriteFrames_cvnsp")
animation = &"stun"

[node name="StateMachine" type="Node" parent="."]
script = ExtResource("11_nxnwp")

[node name="Idle" type="Node" parent="StateMachine"]
script = ExtResource("12_efn1h")

[node name="Walk" type="Node" parent="StateMachine"]
script = ExtResource("13_4cney")
move_speed = 400.0

[node name="Attack" type="Node" parent="StateMachine"]
script = ExtResource("14_kqrd2")

[node name="Stun" type="Node" parent="StateMachine"]
script = ExtResource("15_ypisy")

[node name="Death" type="Node" parent="StateMachine"]
script = ExtResource("16_58d4g")

[node name="Interactions" type="Node2D" parent="."]
script = ExtResource("17_h4mmb")

[node name="HitBox" parent="Interactions" instance=ExtResource("18_c0upf")]
collision_layer = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Interactions/HitBox"]
position = Vector2(-1, 1)
scale = Vector2(0.64, 0.64)
shape = SubResource("CircleShape2D_b1ygp")
debug_color = Color(0.748052, 0.461045, 3.85046e-07, 0.42)

[node name="InteractionArea" type="Area2D" parent="Interactions"]
position = Vector2(0, -10)
collision_layer = 4
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Interactions/InteractionArea"]
shape = SubResource("RectangleShape2D_b1ygp")
debug_color = Color(3.7542e-06, 0.645137, 0.26653, 0.42)

[node name="Camera2D" type="Camera2D" parent="."]
script = ExtResource("19_pap50")

[node name="WeaponPosition" type="Node2D" parent="."]
position = Vector2(60, 0)
script = ExtResource("20_v74qa")
weapon_position_x = 60

[node name="FrontWeaponPosition" type="Node2D" parent="."]
position = Vector2(0, -60)
script = ExtResource("21_0x0ja")
weapon_position_y = 60

[node name="EffectAnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_n471f")
}

[node name="Audio" type="Node2D" parent="."]

[node name="AudioStreamPlayer2D" type="AudioStreamPlayer2D" parent="Audio"]
max_polyphony = 7
bus = &"SFX"

[node name="EP Recharge Timer" type="Timer" parent="."]
wait_time = 10.0
autostart = true

[connection signal="timeout" from="EP Recharge Timer" to="." method="_on_ep_recharge_timer_timeout"]
